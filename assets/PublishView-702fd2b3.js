import{d as m,r as l,a as x,o as f,c as w,b as e,w as u,v as _,g as k,V as F,e as V,h as C,f as B}from"./index-a88a7c3b.js";const P={class:"ms-5 bg-light",id:"wrapper"},j=e("div",{class:"top-bar",style:{"padding-left":"15px"}},[e("i",{class:"bi bi-arrow-left align-middle",style:{"font-size":"1.5rem","margin-right":"10px"}}),e("span",{class:"align-middle",style:{"line-height":"1.5rem"}},"Publicēt")],-1),D={class:"bottom-bar"},L={class:"container",style:{"padding-left":"0px","margin-left":"0px","margin-right":"0px",width:"100%"}},M={class:"row align-items-baseline p-0",style:{width:"50%","margin-left":"0px","margin-right":"0px"}},z=e("div",{class:"col p-0"},[e("div",{class:"mb-3"},[e("span",{class:"me-3 p-0 align"},"Audiofails")])],-1),A={class:"col p-0"},I=e("label",{for:"mp3-upload",class:"btn btn-secondary"}," Lejupielādēt ",-1),N=e("div",{class:"col p-0"},[e("div",{class:"mb-3"},[e("span",{class:"me-3 p-0"},"midi")])],-1),S={class:"col p-0"},T=e("label",{for:"midi-upload",class:"btn btn-secondary"}," Lejupielādēt ",-1),U={class:"row align-items-baseline p-0",style:{"margin-left":"0px","margin-right":"0px",width:"50%"}},E=k('<div class="col p-0"><div class="mb-3"><span class="me-3">Videofails</span></div></div><div class="col p-0"><button class="btn btn-secondary" type="button">Lejupielādēt</button></div><div class="col p-0"><span class="me-3 p-0">pdf</span></div>',3),J={class:"col p-0"},$=e("label",{for:"pdf-upload",class:"btn btn-secondary"}," Lejupielādēt ",-1),q={class:"row p-0",style:{"margin-left":"0px","margin-right":"0px",width:"100%"}},G={class:"col p-0"},H=e("label",{for:"additional-data-area",class:"mb-2 p-0"},"Papilddati: ",-1),K=m({__name:"Publish",setup(h){const n=l(""),i=l(""),{cookies:v}=x(),b="http://74.234.122.93:8080",c=l(null),p=l(null),r=l(null);function d(t){var s=t.target.files||t.dataTransfer.files;if(!s.length)return;let a=s[0].name.split(".").pop();a=="mp3"||a=="wav"||a=="flac"||a=="ogg"?c.value=s[0]:a=="mid"?p.value=s[0]:a=="pdf"&&(r.value=s[0])}function g(){const t=new FormData,s=l(v.get("token"));if(s.value!=null){let a=F.decode(s.value);t.append("userId",a.userId),t.append("content",n.value),t.append("audioFile",c.value),t.append("midiFile",p.value),t.append("pdfFile",r.value),i.value!=""?t.append("songMetadata",i.value):t.append("songMetadata",null);let y={headers:{Authorization:"Bearer "+s.value}};V.post(b+"/api/posts/publish",t,y).then(async function(o){console.log(o.data),await C.push("/publication/"+o.data)}).catch(function(o){console.log(o)})}}return(t,s)=>(f(),w("div",P,[j,e("div",D,[e("form",null,[u(e("textarea",{class:"form-control mb-4",id:"content-area",rows:"10","onUpdate:modelValue":s[0]||(s[0]=a=>n.value=a)},null,512),[[_,n.value]]),e("div",L,[e("div",M,[z,e("div",A,[I,e("input",{id:"mp3-upload",class:"d-none",type:"file",onChange:d},null,32)]),N,e("div",S,[T,e("input",{id:"midi-upload",class:"d-none",type:"file",onChange:d},null,32)])]),e("div",U,[E,e("div",J,[$,e("input",{id:"pdf-upload",class:"d-none",type:"file",onChange:d},null,32)])]),e("div",q,[e("div",G,[H,u(e("textarea",{class:"form-control mb-3",id:"additional-data-area",rows:"3",style:{width:"47.5%"},"onUpdate:modelValue":s[1]||(s[1]=a=>i.value=a)},null,512),[[_,i.value]])])])]),e("button",{type:"button",onClick:g,class:"btn btn-primary"},"Submit")])])]))}});const Q=m({__name:"PublishView",setup(h){return(n,i)=>(f(),B(K))}});export{Q as default};
