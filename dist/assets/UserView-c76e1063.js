import{d as B,a as z,r,V as $,i as j,e as f,o as l,c as o,b as e,j as y,h as V,t as c,k as u,w as b,v as k,F as A,q as F,n as N,_ as L,f as M}from"./index-db5b081f.js";const P={class:"ms-5 wrapped"},S={class:"top bg-light"},T={class:"top-bar",style:{"padding-left":"15px"}},q={class:"align-middle",style:{"line-height":"1.5rem"}},E={class:"content-bar"},J={class:"d-flex mb-3"},R=["src"],G={class:"ms-2 d-flex flex-column justify-content-center"},H={class:"align-items-center"},K={key:0,class:"align-items-center"},O={key:1,class:"align-items-center"},Q={class:"ms-auto"},W={key:0,class:"m-0"},X={key:1,class:"m-0"},Y={class:"d-flex align-items-center mt-3"},Z={class:"d-flex align-items-center me-4"},ee={key:0,class:"bi bi-geo-alt me-3 align-middle",style:{"font-size":"1.5rem"}},te={key:1,class:"align-middle",style:{"line-height":"1.5rem"}},se={key:2,class:"align-middle",style:{"line-height":"1.5rem"}},ae={class:"posts-bar"},le=B({__name:"UserPage",props:["userId"],setup(x){const v=x,d="https://harmony.northeurope.cloudapp.azure.com",{cookies:C}=z(),p=r(C.get("token")),i=r([]),w=r("user-photos/0/default.png"),n=r(!1),m=r(null),_=r(null),g=r(null),h=r(null);let I=$.decode(p.value),U={headers:{Authorization:"Bearer "+p.value}};j(async()=>{await f.get(d+"/api/users/get-by-id?id="+v.userId,U).then(function(t){i.value=t.data,i.value.avatarUrl!=null&&(w.value=i.value.avatarUrl),console.log(t.data),console.log(i.value)}).catch(function(t){console.log(t)}),await f.get(d+"/api/posts/get-by-user-id?userId="+v.userId,U).then(function(t){h.value=t.data,console.log(h.value)})});function D(){const t=new FormData;if(p.value!=null){t.append("userId",I.userId),m.value!=null&&t.append("title",m.value),_.value!=null&&t.append("biography",_.value),g.value!=null&&t.append("location",g.value);let s={headers:{Authorization:"Bearer "+p.value}};console.log(t),f.post(d+"/api/users/update-data",t,s).then(function(a){console.log(a),V.go(0)}).catch(function(a){console.log(a)})}}return(t,s)=>(l(),o("div",P,[e("div",S,[e("div",T,[e("i",{class:"bi bi-arrow-left align-middle pointer",style:{"font-size":"1.5rem","margin-right":"10px"},onClick:s[0]||(s[0]=a=>y(V).push({path:"/"}))}),e("span",q,c(i.value.name),1)]),e("div",E,[e("div",J,[e("img",{src:y(d)+"/api/"+w.value,alt:"",width:"75",height:"75",class:"rounded-circle me-2 object-fit-cover"},null,8,R),e("div",G,[e("strong",null,c(i.value.name),1),e("div",H,"@"+c(i.value.username),1),n.value?u("",!0):(l(),o("div",K,c(i.value.title),1)),n.value?(l(),o("div",O,[b(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=a=>m.value=a),class:"form-control",placeholder:"Title"},null,512),[[k,m.value]])])):u("",!0)]),e("div",Q,[!n.value&&v.userId==y(I).userId?(l(),o("button",{key:0,type:"button",class:"btn btn-secondary",onClick:s[2]||(s[2]=a=>n.value=!0)},"Redīģēt profilu")):u("",!0),n.value?(l(),o("button",{key:1,type:"button",class:"btn btn-primary me-3",onClick:D},"Saglabāt")):u("",!0),n.value?(l(),o("button",{key:2,type:"button",class:"btn btn-secondary",onClick:s[3]||(s[3]=a=>n.value=!1)},"Atcelt")):u("",!0)])]),n.value?u("",!0):(l(),o("p",W,c(i.value.biography),1)),n.value?(l(),o("div",X,[b(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=a=>_.value=a),class:"form-control w-75",name:"nya",id:"",rows:"3",placeholder:"Biography"},null,512),[[k,_.value]])])):u("",!0),e("div",Y,[e("div",Z,[i.value.location||n.value?(l(),o("i",ee)):u("",!0),n.value?u("",!0):(l(),o("span",te,c(i.value.location),1)),n.value?(l(),o("span",se,[b(e("input",{class:"form-control",type:"text",placeholder:"Location","onUpdate:modelValue":s[5]||(s[5]=a=>g.value=a)},null,512),[[k,g.value]])])):u("",!0)])])])]),e("div",ae,[(l(!0),o(A,null,F(h.value,a=>(l(),o("div",null,[N(L,{post:a,class:"m-0"},null,8,["post"])]))),256))])]))}});const ne=B({__name:"UserView",setup(x){return(v,d)=>(l(),M(le))}});export{ne as default};
